<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <title>MongoDB 创建文档 | knzn.net</title><meta name="description" content="大前端知识分享网站">
    <link rel="preload" href="/vuepress-theme-knzn/assets/js/runtime~app.813766ea.js" as="script"><link rel="preload" href="/vuepress-theme-knzn/assets/css/styles.e822ef45.css" as="style"><link rel="preload" href="/vuepress-theme-knzn/assets/js/4666.93202135.js" as="script"><link rel="preload" href="/vuepress-theme-knzn/assets/js/app.4f9d344d.js" as="script"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-9f3fcaa4.1b8ca017.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-899df890.09b6ae47.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a92fa36.c8154151.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7e12ee98.ea409588.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2756a4b2.c827a271.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4428dfb1.cdd55c69.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/5830.c7d14f1b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-24469f5c.fed244a8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-664c577c.4443cfa5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1615bf52.f6a4b0a5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1e1b0228.ff0d1544.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4684fb5a.8fa12255.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-51279dfe.10753b06.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1596fbeb.a493a0b0.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3641ecee.f04a9f36.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7210f09e.4a291e07.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-49e03b1e.d403c109.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5d2dded8.ad037719.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-84092c86.cbf0b000.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-07472075.d2d0b6ac.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-30fc8ec7.42ac014b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0de0fd96.39a63124.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5f0b136e.efcc68af.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7b104bd6.5de5dd33.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2a736f02.93378e2e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-48879aae.467d076e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4a2f069e.0fd28b7d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1fc42db6.309a4dba.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-cecc57f4.7ec8d97c.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-556b6df8.3f7753f9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-efe2c25a.c05f07e5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/8079.c3bbc0d7.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-13aca52b.5f2890c7.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-39d47cec.b095f558.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6716b9b1.a7afa784.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-bdde92d8.a85726bb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-a0470d1c.3b3e1376.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-27af4b01.88558619.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-19883268.b6d07af2.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3834afdd.8ce98132.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4764e1c4.323ecaea.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-cde3a97a.66d17771.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a5a2de4.fd182ec9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4a07565a.baf81ffb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0694520a.9395274c.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1f11a6a2.b9de4cbc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1de687f6.e2f1e47f.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7674e22b.3881a6d0.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3fe4c5db.f0977706.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7cc9c600.db4246f5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/5605.8e40b379.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-264a61dd.554cf62b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-37bafd5f.a4387baa.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-8d22c02c.a1971170.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6cf7166b.95f85595.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-107f0ee0.0986e08e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5dcf7aa0.28698412.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1cfef914.27126c21.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-d4b9630c.4c721cab.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-747344c8.179a589e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-e84a6406.5a4b0ce1.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6e5a5958.164e411a.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0055d228.eb370598.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a376634.7765f8cb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4c6c05e0.e99c93d2.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-674fc706.921e8137.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-09203a14.f4f28e23.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6abe350c.bc37b7e8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-64137a1e.aa37f341.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/9330.a23ca85d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2dd7a0c9.dbc0e214.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7534.7858fa5b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3dcc8dff.42250acb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-bdaff392.264d8f98.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6999f94a.06eb3a10.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-a108ccdc.689881e9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4b722f0b.767c2d6d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2d2eb624.17f2ac5f.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-598ebf6a.27894a63.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/1493.621b4732.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-361ecdc5.995029ba.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/2872.274d6544.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-55704082.491dc0c8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-48bf88b6.21774e00.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7517.c75a898e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/8427.53575c78.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-fabbb680.bd7bc1cb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/9163.9349bcf1.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-19fc749d.e1711379.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-c960de4e.e8c2aaad.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7042.9829b4c6.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/2994.73b50e07.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2086c098.b2f1a9fc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0b2fb86c.15b0a646.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-8daa1a0e.09d6f4b3.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1152bc8b.c50629ae.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-e355b60c.06f74233.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-41507b24.5692ccfc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-15534fdd.59203458.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3706649a.f26a483b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/css/6286.styles.2808748c.css">
    <link rel="stylesheet" href="/vuepress-theme-knzn/assets/css/styles.e822ef45.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><header class="theme-header" is-logo="true"><a href="/vuepress-theme-knzn/" class="logo-link" style=""><img src="/vuepress-theme-knzn/images/logo-light.svg" alt class="logo"><strong class="title">knzn.net</strong></a><!----><nav class="navbar"><i class="iconfont icon-menu menu-btn"></i><ul class="nav-list"><li class="nav-item"><div class="navbar-blogger"><div class="avatar"><img src="/vuepress-theme-knzn/images/avatar.jpg" alt="头像" title="头像"></div><div class="types"><a href="/vuepress-theme-knzn/categories/?category=all" class="type"><span class="text">分类</span><span class="num">82</span></a><div class="divider"></div><a href="/vuepress-theme-knzn/tags/?tag=all" class="type"><span class="text">标签</span><span class="num">89</span></a></div><div class="blogger"><div class="name">前端程序猿</div><p class="slogan" title="种一棵树最好的时间是十年前，其次是现在！">种一棵树最好的时间是十年前，其次是现在！</p></div></div></li><!--[--><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/dbe1806c869181db9c55afecd31d39b9/" class="navbar-item"><!----><span class="text">主题配置</span></a></li><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">深入理解JavaScript</span></a></li><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">TypeScript学习笔记</span></a></li><li class="nav-link nav-item"><div class="navbar-dropdown"><div class="dropdown-header"><span class="title">杂谈</span><span class="arrow"></span></div><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">linux笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">git笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">js笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">mongoDB笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">mysql笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">python笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">工具</span></a></li><!--]--></ul></div></li><!--]--><li class="nav-link nav-item"><button class="theme-toggle"><i class="icon-sun iconfont"></i></button></li><li class="nav-link nav-item search-link"><a href="/vuepress-theme-knzn/search/" class="navbar-item"><i class="icon-search iconfont"></i><span class="text">搜索</span></a></li><li class="nav-item nav-medias"><div class="medias"><!--[--><a class="icon-email iconfont" href="mailto:1140457303@qq.com" title="email" target="_blank"></a><a class="icon-QQ iconfont" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1140457303&amp;site=qq&amp;menu=yes" title="QQ" target="_blank"></a><a class="icon-jianshu iconfont" href="https://www.jianshu.com/u/f22487800f07" title="jianshu" target="_blank"></a><a class="icon-gitee iconfont" href="https://gitee.com/zhanghuanbiao" title="gitee" target="_blank"></a><a class="icon-github iconfont" href="https://github.com/zhb333" title="github" target="_blank"></a><!--]--></div></li></ul></nav></header><!--[--><main class="theme-container theme-post-container"><aside class="post-aside"><ul class="menu-list"><!--[--><li id="使用 docker 搭建 MongoDB 服务" class="menu-item"><a href="/vuepress-theme-knzn/c440f08606b58fca67b46f1652721c20/" class="navbar-item"><!----><span class="text">使用 docker 搭建 MongoDB 服务</span></a></li><li id="MongoDB 创建文档" class="active menu-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/" class="router-link-active router-link-exact-active navbar-item"><!----><span class="text">MongoDB 创建文档</span></a></li><li id="MongoDB 读取文档" class="menu-item"><a href="/vuepress-theme-knzn/f96eb269374f48ee593ab4d5168a399e/" class="navbar-item"><!----><span class="text">MongoDB 读取文档</span></a></li><!--]--></ul></aside><div class="theme-content post-container"><div class="post-wrapper"><i class="iconfont icon-book toc-btn"></i><i class="iconfont icon-menu aside-btn"></i><div class="markdown-body"><h1 class="post-title"><span>MongoDB 创建文档</span></h1><div class="post-info"><span class="post-info-item"><i class="iconfont icon-avatar" title="作者"></i> 张焕标</span><span class="post-info-item"><i class="iconfont icon-datetime" title="日期"></i> 2019-09-09T20:03:32.000Z</span><span class="post-info-item"><i class="iconfont icon-categorynormal" title="分类"></i><!--[--><a href="/vuepress-theme-knzn/categories/?category=backEnd" class="post-type">backEnd</a><!--]--></span><span class="post-info-item"><i class="iconfont icon-tag" title="标签"></i><!--[--><a href="/vuepress-theme-knzn/tags/?tag=mongoDB" class="post-type">mongoDB</a><!--]--></span></div><div><h2 id="一、创建数据库" tabindex="-1"><a class="header-anchor" href="#一、创建数据库" aria-hidden="true">#</a> 一、创建数据库</h2><p>使用 <code>use databaseName</code> 命令切换数据库，如果数据库不存在则创建</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> use <span class="token builtin class-name">test</span>
switched to db <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>show collections</code> 命令查看数据库下的所有集合，新建的数据库的集合为 0 个</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show collections
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="二、db-collection-insertone-创建当个文档" tabindex="-1"><a class="header-anchor" href="#二、db-collection-insertone-创建当个文档" aria-hidden="true">#</a> 二、<code>db.collection.insertOne()</code>创建当个文档</h2><p>The <code>insertOne()</code> method has the following syntax:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.insertOne<span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
   <span class="token punctuation">{</span>
      writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">document</td><td style="text-align:center;">document</td><td style="text-align:left;">要插入到集合中的文档</td></tr><tr><td style="text-align:center;">writeConcern</td><td style="text-align:center;">document</td><td style="text-align:left;">(可选的) 表示一个文档的安全写级别<br>如果在事务中运行，请不要设置该参数<br>(以后文章会讲到)</td></tr></tbody></table><p>往 <code>department</code> 这个集合插入第一条文档(<code>department</code>集合不存在时，会自动创建，并插入数据)</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span> <span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> true, <span class="token string">&quot;insertedId&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>返回：一个文档描述</p><ul><li><code>acknowledged</code> 安全写级别默认开启</li><li><code>insertedId</code> 写入集合的文档主键 <code>_id</code> 的值</li></ul><h2 id="三、db-collection-insertone-操作失败的情况" tabindex="-1"><a class="header-anchor" href="#三、db-collection-insertone-操作失败的情况" aria-hidden="true">#</a> 三、<code>db.collection.insertOne</code> 操作失败的情况</h2><p>文档主键必须唯一，重复创建相同 <code>_id</code> 的文档时，将创建失败</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
	<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>,
	<span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span>,
		<span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lisi&quot;</span>,
		<span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、自动生成文档主键" tabindex="-1"><a class="header-anchor" href="#四、自动生成文档主键" aria-hidden="true">#</a> 四、自动生成文档主键</h2><p>人为的指定文档主键，并不安全，如果不指定 <code>_id</code>的值，<code>MongoDB</code> 会自动调用<code>ObjectId()</code> 生成文档主键，并确保唯一性</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> ObjectId<span class="token punctuation">(</span><span class="token punctuation">)</span>
ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f4fe0abb3dbdc66cacb3b8e&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>不指定 <code>_id</code> 进行创建</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,
	<span class="token string">&quot;insertedId&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f4fe031b3dbdc66cacb3b8d&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、db-collection-insertmany-创建多个文档" tabindex="-1"><a class="header-anchor" href="#五、db-collection-insertmany-创建多个文档" aria-hidden="true">#</a> 五、<code>db.collection.insertMany()</code>创建多个文档</h2><p>The <code>insertMany()</code> method has the following syntax:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.insertMany<span class="token punctuation">(</span>
   <span class="token punctuation">[</span> <span class="token operator">&lt;</span>document <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> , <span class="token operator">&lt;</span>document <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>, <span class="token punctuation">..</span>. <span class="token punctuation">]</span>,
   <span class="token punctuation">{</span>
      writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
      ordered: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">document</td><td style="text-align:center;">document</td><td style="text-align:left;">要插入到集合中的文档数组</td></tr><tr><td style="text-align:center;">writeConcern</td><td style="text-align:center;">document</td><td style="text-align:left;">(可选的) 表示一个文档的安全写级别<br>如果在事务中运行，请不要设置该参数<br>(以后文章会讲到)</td></tr><tr><td style="text-align:center;">ordered</td><td style="text-align:center;">boolean</td><td style="text-align:left;">(可选的) 一个布尔值，指定<code>mongod</code>实例应该执行有序插入还是无序插入。默认值为<code>true</code> <br> 如果为<code>false</code>，则执行无序插入，如果其中一个文档发生错误，则继续处理数组中的其余文档。</td></tr></tbody></table><p>一次性创建两个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;joe&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lily&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,
	<span class="token string">&quot;insertedIds&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
		ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f4fe3cdb3dbdc66cacb3b8f&quot;</span><span class="token punctuation">)</span>,
		ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f4fe3cdb3dbdc66cacb3b90&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回：一个文档描述</p><ul><li><code>acknowledged</code> 安全写级别默认开启</li><li><code>insertedIds</code> 对于每个成功插入的文档，一个<code>_id</code> 数组</li></ul><h2 id="六、db-collection-insertmany-操作失败的情况" tabindex="-1"><a class="header-anchor" href="#六、db-collection-insertmany-操作失败的情况" aria-hidden="true">#</a> 六、<code>db.collection.insertMany</code> 操作失败的情况</h2><p>文档主键必须唯一，重复创建相同 <code>_id</code> 的文档时，将创建失败</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mike&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lucy&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
			<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
			<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>,
			<span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
				<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span>,
				<span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;mike&quot;</span>,
				<span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上报错信息中发现 <code>nInserted</code> 值为 <code>0</code>, 即两条数据均没有创建成功</p><p><strong>当我们配置 <code>ordered</code> 为 <code>false</code> 时, 结果将会有所不同</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mike&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lucy&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">ordered</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
			<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
			<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>,
			<span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
				<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span>,
				<span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;mike&quot;</span>,
				<span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的结果可以发现 <code>nInserted</code> 的值为 <code>1</code>, 即有一条数据创建成功，<code>_id</code> 为 <code>employee1</code> 的文档，因为主键重复创建失败，另一条文档因为没有错误，所以成功被创建</p><h2 id="七、db-collection-insert-创建一个或多个文档" tabindex="-1"><a class="header-anchor" href="#七、db-collection-insert-创建一个或多个文档" aria-hidden="true">#</a> 七、<code>db.collection.insert()</code> 创建一个或多个文档</h2><p>The insert() method has the following syntax:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.insert<span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>document or array of documents<span class="token operator">&gt;</span>,
   <span class="token punctuation">{</span>
     writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
     ordered: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">document</td><td style="text-align:center;">document</td><td style="text-align:left;">要插入到集合中的文档数组</td></tr><tr><td style="text-align:center;">writeConcern</td><td style="text-align:center;">document</td><td style="text-align:left;">(可选的) 表示一个文档的安全写级别<br>如果在事务中运行，请不要设置该参数<br>(以后文章会讲到)</td></tr><tr><td style="text-align:center;">ordered</td><td style="text-align:center;">boolean</td><td style="text-align:left;">(可选的) 一个布尔值，指定<code>mongod</code>实例应该执行有序插入还是无序插入。默认值为<code>true</code> <br> 如果为<code>false</code>，则执行无序插入，如果其中一个文档发生错误，则继续处理数组中的其余文档。</td></tr></tbody></table><p>创建一个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jake&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个文档返回 <code>WriteResult</code> 对象</p><p>创建多个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李二狗&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建多个文档返回 <code>BulkWriteResult</code> 对象</p><h2 id="八、db-collection-insert-操作失败的情况" tabindex="-1"><a class="header-anchor" href="#八、db-collection-insert-操作失败的情况" aria-hidden="true">#</a> 八、<code>db.collection.insert()</code> 操作失败的情况</h2><p>创建一个文档失败的情况</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李二蛋&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;writeError&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
		<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回 <code>WriteResult</code> 对象， 和创建成功返回同样类型的错误对象</p><p>创建多个文档失败的情况</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四娣&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李逍遥&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
			<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
			<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>,
			<span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
				<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span>,
				<span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;李四娣&quot;</span>,
				<span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">16</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回 <code>BulkWriteResult</code> 对象， 和创建成功返回同样类型的错误对象</p><p>当设置 <code>ordered</code> 参数为 <code>false</code> 时，则执行无序插入，如果其中一个文档发生错误，则继续处理数组中的其余文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token string">&quot;employee1&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四娣&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李逍遥&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">ordered</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
			<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
			<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: <span class="token entity" title="\&quot;">\&quot;</span>employee1<span class="token entity" title="\&quot;">\&quot;</span> }&quot;</span>,
			<span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
				<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;employee1&quot;</span>,
				<span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;李四娣&quot;</span>,
				<span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">16</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回结果发现，有一个报错，<code>nInserted</code> 为 <code>1</code> 则表示成功创建了 1 个文档</p><h2 id="九、db-collection-save-保存文档" tabindex="-1"><a class="header-anchor" href="#九、db-collection-save-保存文档" aria-hidden="true">#</a> 九、<code>db.collection.save()</code> 保存文档</h2><blockquote><p>The <code>save()</code> method uses either the insert or the update command.</p></blockquote><p><code>save()</code>方法， 当保存新文档时，会调用 <code>insert()</code> 方法创建文档，当保存的文档 <code>_id</code> 已存在，会调用 <code>update()</code> 方法更新文档</p><p><strong>提示:</strong> <code>MongoDB</code> 不推荐 <code>db.collection.save()</code> 方法。而是使用<code>db.collection.insertOne()</code>或<code>db.collection.replaceOne()</code>。</p><p><code>update()</code>、 <code>db.collection.replaceOne()</code> 更新文档操作，后面的文章会讲解</p><p>The save() method has the following form:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.save<span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
   <span class="token punctuation">{</span>
     writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>save()</code> 方法创建一个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;郑屠户&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用 <code>save()</code> 方法创建多个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;楚霸王&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">37</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李寻欢&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>BulkWriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;writeErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;writeConcernErrors&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>,
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
	<span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;upserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>可以发现，运行结果与 <code>insert()</code> 通用</strong></p><h2 id="十、objectid-文档主键" tabindex="-1"><a class="header-anchor" href="#十、objectid-文档主键" aria-hidden="true">#</a> 十、<code>ObjectId()</code> 文档主键</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ObjectId<span class="token punctuation">(</span><span class="token operator">&lt;</span>hexadecimal<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">hexadecimal</td><td style="text-align:center;">String</td><td style="text-align:left;">(可选的)十二位的十六进制字符串值</td></tr></tbody></table><p>十二位的十六进制表示为：</p><ul><li>一个 4 字节的时间戳值，表示<code>ObjectId</code>的创建，自 Unix 时代以来以秒为单位进行度量</li><li>一个 5 字节的随机值</li><li>一个 3 字节的递增计数器，初始化为一个随机值</li></ul><p>方法和属性：</p><table><thead><tr><th style="text-align:center;">Attribute/Method</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:center;">str</td><td style="text-align:left;">返回对象的十六进制字符串表示形式。</td></tr><tr><td style="text-align:center;">ObjectId.getTimestamp()</td><td style="text-align:left;">将对象的时间戳部分作为日期返回。</td></tr><tr><td style="text-align:center;">ObjectId.toString()</td><td style="text-align:left;">以字符串文本&quot; ObjectId(…)&quot;的形式返回 JavaScript 表示形式。</td></tr><tr><td style="text-align:center;">ObjectId.valueOf()</td><td style="text-align:left;">返回以十六进制字符串形式表示的对象。返回的字符串是 str 属性</td></tr></tbody></table><p>创建一个 <code>ObjectId</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> const objId <span class="token operator">=</span> ObjectId<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> objId
ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f5084376310a4635f151165&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>传入十六进制字符串创建 <code>ObjectId</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> ObjectId<span class="token punctuation">(</span>objId.str<span class="token punctuation">)</span>
ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f5084376310a4635f151165&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>属性和方法：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> objId.str
5f5084376310a4635f151165
<span class="token operator">&gt;</span> objId.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>
ObjectId<span class="token punctuation">(</span><span class="token string">&quot;5f5084376310a4635f151165&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> objId.valueOf<span class="token punctuation">(</span><span class="token punctuation">)</span>
5f5084376310a4635f151165
<span class="token operator">&gt;</span> objId.getTimestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>
ISODate<span class="token punctuation">(</span><span class="token string">&quot;2020-09-03T05:50:47Z&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十一、-复合主键" tabindex="-1"><a class="header-anchor" href="#十一、-复合主键" aria-hidden="true">#</a> 十一、 复合主键</h2><p>文档主键的值为另一个文档</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&quot;leaving&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">&quot;male&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;白小飞&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>复合主键也要满足唯一性</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
	<span class="token string">&quot;writeError&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
		<span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: test.department index: _id_ dup key: { _id: { status: <span class="token entity" title="\&quot;">\&quot;</span>leaving<span class="token entity" title="\&quot;">\&quot;</span>, gender: <span class="token entity" title="\&quot;">\&quot;</span>male<span class="token entity" title="\&quot;">\&quot;</span> } }&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不过，当复合主键文档的键值对顺序改变时，<code>MongoDB</code> 会认为是不同的文档主键</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>department<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&quot;leaving&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;杨贵妃&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="十二、总结" tabindex="-1"><a class="header-anchor" href="#十二、总结" aria-hidden="true">#</a> 十二、总结</h2><ul><li><code>db.collection.insertOne()</code> 将一个文档插入到集合中</li><li><code>db.collection.insertMany()</code> 将多个文档插入到集合中</li><li><code>db.collection.insert()</code> 将一个或多个文档插入到集合中。</li><li><code>db.collection.save()</code> 更新现有文档或插入新文档</li><li><code>ObjectId()</code> 生成文档主键对象</li><li>复合主键的概念</li></ul></div></div><div class="theme-divider"></div><div class="giscus-comment"><!----></div></div><div class="card-box card-wrapper post-tocs"><header><h3 class="title"><i class="iconfont icon-categorynormal"></i><span> 目录 </span></h3></header><nav class="vuepress-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#一、创建数据库" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="一、创建数据库">一、创建数据库</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#二、db-collection-insertone-创建当个文档" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="二、db.collection.insertOne()创建当个文档">二、db.collection.insertOne()创建当个文档</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#三、db-collection-insertone-操作失败的情况" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="三、db.collection.insertOne 操作失败的情况">三、db.collection.insertOne 操作失败的情况</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#四、自动生成文档主键" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="四、自动生成文档主键">四、自动生成文档主键</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#五、db-collection-insertmany-创建多个文档" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="五、db.collection.insertMany()创建多个文档">五、db.collection.insertMany()创建多个文档</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#六、db-collection-insertmany-操作失败的情况" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="六、db.collection.insertMany 操作失败的情况">六、db.collection.insertMany 操作失败的情况</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#七、db-collection-insert-创建一个或多个文档" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="七、db.collection.insert() 创建一个或多个文档">七、db.collection.insert() 创建一个或多个文档</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#八、db-collection-insert-操作失败的情况" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="八、db.collection.insert() 操作失败的情况">八、db.collection.insert() 操作失败的情况</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#九、db-collection-save-保存文档" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="九、db.collection.save() 保存文档">九、db.collection.save() 保存文档</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#十、objectid-文档主键" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="十、ObjectId() 文档主键">十、ObjectId() 文档主键</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#十一、-复合主键" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="十一、 复合主键">十一、 复合主键</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/ecd4bf1a92f1785235ccb7ba0f93ec1c/#十二、总结" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="十二、总结">十二、总结</a><!--[--><!--]--></li></ul></nav></div></div></main><footer class="theme-footer theme-common-footer"><div class="copyright"><a class="beian" href="">粤ICP备20016112号-2</a><span class="delimiter">|</span><span class="info">Copyright © 2018-2022 knzn.net</span></div></footer><div style="display:none;" class="back-to-top"><i class="iconfont icon-back-to-top"></i></div><!--]--><!--]--><!--]--></div>
    <script src="/vuepress-theme-knzn/assets/js/runtime~app.813766ea.js" defer></script><script src="/vuepress-theme-knzn/assets/js/4666.93202135.js" defer></script><script src="/vuepress-theme-knzn/assets/js/app.4f9d344d.js" defer></script>
  </body>
</html>
