<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <title>06 Symbol-ES6 新基础类型 | knzn.net</title><meta name="description" content="大前端知识分享网站">
    <link rel="preload" href="/vuepress-theme-knzn/assets/js/runtime~app.813766ea.js" as="script"><link rel="preload" href="/vuepress-theme-knzn/assets/css/styles.e822ef45.css" as="style"><link rel="preload" href="/vuepress-theme-knzn/assets/js/4666.93202135.js" as="script"><link rel="preload" href="/vuepress-theme-knzn/assets/js/app.4f9d344d.js" as="script"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-9f3fcaa4.1b8ca017.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-899df890.09b6ae47.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a92fa36.c8154151.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7e12ee98.ea409588.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2756a4b2.c827a271.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4428dfb1.cdd55c69.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/5830.c7d14f1b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-24469f5c.fed244a8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-664c577c.4443cfa5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1615bf52.f6a4b0a5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1e1b0228.ff0d1544.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4684fb5a.8fa12255.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-51279dfe.10753b06.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1596fbeb.a493a0b0.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3641ecee.f04a9f36.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7210f09e.4a291e07.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-49e03b1e.d403c109.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5d2dded8.ad037719.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-84092c86.cbf0b000.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-07472075.d2d0b6ac.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-30fc8ec7.42ac014b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0de0fd96.39a63124.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5f0b136e.efcc68af.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7b104bd6.5de5dd33.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2a736f02.93378e2e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-48879aae.467d076e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4a2f069e.0fd28b7d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1fc42db6.309a4dba.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-cecc57f4.7ec8d97c.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-556b6df8.3f7753f9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-efe2c25a.c05f07e5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/8079.c3bbc0d7.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-13aca52b.5f2890c7.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-39d47cec.b095f558.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6716b9b1.a7afa784.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-bdde92d8.a85726bb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-a0470d1c.3b3e1376.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-27af4b01.88558619.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-19883268.b6d07af2.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3834afdd.8ce98132.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4764e1c4.323ecaea.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-cde3a97a.66d17771.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a5a2de4.fd182ec9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4a07565a.baf81ffb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0694520a.9395274c.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1f11a6a2.b9de4cbc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1de687f6.e2f1e47f.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7674e22b.3881a6d0.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3fe4c5db.f0977706.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-7cc9c600.db4246f5.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/5605.8e40b379.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-264a61dd.554cf62b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-37bafd5f.a4387baa.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-8d22c02c.a1971170.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6cf7166b.95f85595.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-107f0ee0.0986e08e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-5dcf7aa0.28698412.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1cfef914.27126c21.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-d4b9630c.4c721cab.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-747344c8.179a589e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-e84a6406.5a4b0ce1.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6e5a5958.164e411a.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0055d228.eb370598.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0a376634.7765f8cb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4c6c05e0.e99c93d2.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-674fc706.921e8137.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-09203a14.f4f28e23.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6abe350c.bc37b7e8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-64137a1e.aa37f341.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/9330.a23ca85d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2dd7a0c9.dbc0e214.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7534.7858fa5b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3dcc8dff.42250acb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-bdaff392.264d8f98.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-6999f94a.06eb3a10.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-a108ccdc.689881e9.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-4b722f0b.767c2d6d.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2d2eb624.17f2ac5f.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-598ebf6a.27894a63.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/1493.621b4732.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-361ecdc5.995029ba.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/2872.274d6544.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-55704082.491dc0c8.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-48bf88b6.21774e00.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7517.c75a898e.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/8427.53575c78.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-fabbb680.bd7bc1cb.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/9163.9349bcf1.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-19fc749d.e1711379.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-c960de4e.e8c2aaad.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/7042.9829b4c6.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/2994.73b50e07.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-2086c098.b2f1a9fc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-0b2fb86c.15b0a646.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-8daa1a0e.09d6f4b3.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-1152bc8b.c50629ae.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-e355b60c.06f74233.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-41507b24.5692ccfc.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-15534fdd.59203458.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/js/v-3706649a.f26a483b.js"><link rel="prefetch" href="/vuepress-theme-knzn/assets/css/6286.styles.2808748c.css">
    <link rel="stylesheet" href="/vuepress-theme-knzn/assets/css/styles.e822ef45.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><header class="theme-header" is-logo="true"><a href="/vuepress-theme-knzn/" class="logo-link" style=""><img src="/vuepress-theme-knzn/images/logo-light.svg" alt class="logo"><strong class="title">knzn.net</strong></a><!----><nav class="navbar"><i class="iconfont icon-menu menu-btn"></i><ul class="nav-list"><li class="nav-item"><div class="navbar-blogger"><div class="avatar"><img src="/vuepress-theme-knzn/images/avatar.jpg" alt="头像" title="头像"></div><div class="types"><a href="/vuepress-theme-knzn/categories/?category=all" class="type"><span class="text">分类</span><span class="num">82</span></a><div class="divider"></div><a href="/vuepress-theme-knzn/tags/?tag=all" class="type"><span class="text">标签</span><span class="num">89</span></a></div><div class="blogger"><div class="name">前端程序猿</div><p class="slogan" title="种一棵树最好的时间是十年前，其次是现在！">种一棵树最好的时间是十年前，其次是现在！</p></div></div></li><!--[--><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/dbe1806c869181db9c55afecd31d39b9/" class="navbar-item"><!----><span class="text">主题配置</span></a></li><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">深入理解JavaScript</span></a></li><li class="nav-link nav-item"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">TypeScript学习笔记</span></a></li><li class="nav-link nav-item"><div class="navbar-dropdown"><div class="dropdown-header"><span class="title">杂谈</span><span class="arrow"></span></div><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">linux笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">git笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">js笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">mongoDB笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">mysql笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">python笔记</span></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-theme-knzn/PostsLayout" class="navbar-item"><!----><span class="text">工具</span></a></li><!--]--></ul></div></li><!--]--><li class="nav-link nav-item"><button class="theme-toggle"><i class="icon-sun iconfont"></i></button></li><li class="nav-link nav-item search-link"><a href="/vuepress-theme-knzn/search/" class="navbar-item"><i class="icon-search iconfont"></i><span class="text">搜索</span></a></li><li class="nav-item nav-medias"><div class="medias"><!--[--><a class="icon-email iconfont" href="mailto:1140457303@qq.com" title="email" target="_blank"></a><a class="icon-QQ iconfont" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1140457303&amp;site=qq&amp;menu=yes" title="QQ" target="_blank"></a><a class="icon-jianshu iconfont" href="https://www.jianshu.com/u/f22487800f07" title="jianshu" target="_blank"></a><a class="icon-gitee iconfont" href="https://gitee.com/zhanghuanbiao" title="gitee" target="_blank"></a><a class="icon-github iconfont" href="https://github.com/zhb333" title="github" target="_blank"></a><!--]--></div></li></ul></nav></header><!--[--><main class="theme-container theme-post-container"><aside class="post-aside"><ul class="menu-list"><!--[--><li id="01 导读：Hello~TypeScript" class="menu-item"><a href="/vuepress-theme-knzn/3f67470338415a88ef52542cde1cb6b3/" class="navbar-item"><!----><span class="text">01 导读：Hello~TypeScript</span></a></li><li id="02 TypeScript 应该怎么学" class="menu-item"><a href="/vuepress-theme-knzn/38f8ec4dc80a218b9b6d82922729128e/" class="navbar-item"><!----><span class="text">02 TypeScript 应该怎么学</span></a></li><li id="03 VSCode 揭秘和搭建开发环境" class="menu-item"><a href="/vuepress-theme-knzn/56439d7ad3ca703d4722ef74d55bed4a/" class="navbar-item"><!----><span class="text">03 VSCode 揭秘和搭建开发环境</span></a></li><li id="04 八个 JS 中你见过的类型" class="menu-item"><a href="/vuepress-theme-knzn/10abf20943b19ec42ca8827992ebe7ee/" class="navbar-item"><!----><span class="text">04 八个 JS 中你见过的类型</span></a></li><li id="05 TS 中补充的六个类型" class="menu-item"><a href="/vuepress-theme-knzn/01e124a17e05f4b1ae2d0d8ac6bb961b/" class="navbar-item"><!----><span class="text">05 TS 中补充的六个类型</span></a></li><li id="06 Symbol-ES6 新基础类型" class="active menu-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/" class="router-link-active router-link-exact-active navbar-item"><!----><span class="text">06 Symbol-ES6 新基础类型</span></a></li><li id="07 深入学习枚举" class="menu-item"><a href="/vuepress-theme-knzn/bdb82d9f1acc56a088c036dcb753f227/" class="navbar-item"><!----><span class="text">07 深入学习枚举</span></a></li><li id="08 使用类型断言达到预期" class="menu-item"><a href="/vuepress-theme-knzn/a58a58bd79ea1bc43d21b9400c1feb5f/" class="navbar-item"><!----><span class="text">08 使用类型断言达到预期</span></a></li><li id="09 使用接口定义几乎任意结构" class="menu-item"><a href="/vuepress-theme-knzn/1c3d8579604d89bf15af18f4d6c04276/" class="navbar-item"><!----><span class="text">09 使用接口定义几乎任意结构</span></a></li><li id="10 接口的高阶用法" class="menu-item"><a href="/vuepress-theme-knzn/a9c014bf2a0bc24df093fabd3a0c6311/" class="navbar-item"><!----><span class="text">10 接口的高阶用法</span></a></li><li id="11 为函数和函数参数定义类型" class="menu-item"><a href="/vuepress-theme-knzn/33bc1eae6c4f4f42dc32677dda8ec137/" class="navbar-item"><!----><span class="text">11 为函数和函数参数定义类型</span></a></li><li id="12 使用泛型拯救你的 any" class="menu-item"><a href="/vuepress-theme-knzn/466acf210785a9e1d0af47f4cc1ef7d8/" class="navbar-item"><!----><span class="text">12 使用泛型拯救你的 any</span></a></li><li id="13 TS 中的类，小心它与 ES 标准的差异" class="menu-item"><a href="/vuepress-theme-knzn/2a9a54c40c0efb0eef2ebf18b60b6807/" class="navbar-item"><!----><span class="text">13 TS 中的类，小心它与 ES 标准的差异</span></a></li><li id="14 类型推断，看 TS 有多懂你" class="menu-item"><a href="/vuepress-theme-knzn/e5744ce6067ef77674b29b8682e470f0/" class="navbar-item"><!----><span class="text">14 类型推断，看 TS 有多懂你</span></a></li><li id="15 类型兼容性，开放心态满足灵活的 JS" class="menu-item"><a href="/vuepress-theme-knzn/5bd12400e63a8fadbc9d9491ad7524cb/" class="navbar-item"><!----><span class="text">15 类型兼容性，开放心态满足灵活的 JS</span></a></li><li id="16 使用类型保护让 TS 更聪明" class="menu-item"><a href="/vuepress-theme-knzn/1d3ba8b80b569852fbf27941d66ffff0/" class="navbar-item"><!----><span class="text">16 使用类型保护让 TS 更聪明</span></a></li><li id="17 使用显式赋值断言给 TS 一个你一定会赋值的承诺" class="menu-item"><a href="/vuepress-theme-knzn/792d80d0b21c613e6639165a9e040cfe/" class="navbar-item"><!----><span class="text">17 使用显式赋值断言给 TS 一个你一定会赋值的承诺</span></a></li><li id="18 类型别名和字面量类型—单调的类型" class="menu-item"><a href="/vuepress-theme-knzn/739e7a25e07582460dfeb47799b6e72f/" class="navbar-item"><!----><span class="text">18 类型别名和字面量类型—单调的类型</span></a></li><li id="19 使用可辨识联合并保证每个 case 都被处理" class="menu-item"><a href="/vuepress-theme-knzn/210b1f421b05ccb30ebe91a0846696cb/" class="navbar-item"><!----><span class="text">19 使用可辨识联合并保证每个 case 都被处理</span></a></li><li id="20 this 类型" class="menu-item"><a href="/vuepress-theme-knzn/75746119205b955f670206db7e7fd34a/" class="navbar-item"><!----><span class="text">20 this 类型</span></a></li><li id="21 索引类型：获取索引类型和索引值类型" class="menu-item"><a href="/vuepress-theme-knzn/e8fe98604ce4913d7934f5b7096ded6e/" class="navbar-item"><!----><span class="text">21 索引类型：获取索引类型和索引值类型</span></a></li><li id="22 使用映射类型得到新的类型" class="menu-item"><a href="/vuepress-theme-knzn/37a5ccd00de211d815a3f187ae4998e3/" class="navbar-item"><!----><span class="text">22 使用映射类型得到新的类型</span></a></li><li id="23 前面跳过的 unkown 类型详解" class="menu-item"><a href="/vuepress-theme-knzn/517a27bca0aa1d101e63348b542951ed/" class="navbar-item"><!----><span class="text">23 前面跳过的 unkown 类型详解</span></a></li><li id="24 条件类型，它不是三元操作符的写法吗？" class="menu-item"><a href="/vuepress-theme-knzn/3cb8c03ae8ddb6f1b18cc917c8815887/" class="navbar-item"><!----><span class="text">24 条件类型，它不是三元操作符的写法吗？</span></a></li><li id="25 入手装饰器，给凡人添加超能力" class="menu-item"><a href="/vuepress-theme-knzn/5b146c32f9b731809ae7bd06d5bb721a/" class="navbar-item"><!----><span class="text">25 入手装饰器，给凡人添加超能力</span></a></li><li id="26 使用模块封装代码" class="menu-item"><a href="/vuepress-theme-knzn/e843ac3be0ab024f5f660dd7d04b1b22/" class="navbar-item"><!----><span class="text">26 使用模块封装代码</span></a></li><li id="27 使用命名空间封装代码" class="menu-item"><a href="/vuepress-theme-knzn/b8af3df83141baf6062ba5c9f164f661/" class="navbar-item"><!----><span class="text">27 使用命名空间封装代码</span></a></li><li id="28 对声明合并的爱与恨" class="menu-item"><a href="/vuepress-theme-knzn/3ac42a04085e8baf294165c214a7b889/" class="navbar-item"><!----><span class="text">28 对声明合并的爱与恨</span></a></li><li id="29 混入，兼顾值和类型的合并操作" class="menu-item"><a href="/vuepress-theme-knzn/d740b3055ed2b6f8df7220b822d40567/" class="navbar-item"><!----><span class="text">29 混入，兼顾值和类型的合并操作</span></a></li><li id="30 Promise 及其语法糖 async 和 await" class="menu-item"><a href="/vuepress-theme-knzn/92453e7b55ffb2f1a6b495676b321d43/" class="navbar-item"><!----><span class="text">30 Promise 及其语法糖 async 和 await</span></a></li><li id="31 逐条来看 tsconfig.json 配置" class="menu-item"><a href="/vuepress-theme-knzn/73f4fe47418e5f1e41dc4f8c3ef7134e/" class="navbar-item"><!----><span class="text">31 逐条来看 tsconfig.json 配置</span></a></li><li id="32 书写声明文件之磨刀：识别库类型" class="menu-item"><a href="/vuepress-theme-knzn/79e11a9ed088de5ed3302eb92debf661/" class="navbar-item"><!----><span class="text">32 书写声明文件之磨刀：识别库类型</span></a></li><li id="33 书写声明文件之砍柴：为不同类型库书写声明文件" class="menu-item"><a href="/vuepress-theme-knzn/ce61a7807e8da5950372b28ba7c8b2db/" class="navbar-item"><!----><span class="text">33 书写声明文件之砍柴：为不同类型库书写声明文件</span></a></li><li id="34 结束语" class="menu-item"><a href="/vuepress-theme-knzn/1748879d1285865c9af389a04ff07941/" class="navbar-item"><!----><span class="text">34 结束语</span></a></li><!--]--></ul></aside><div class="theme-content post-container"><div class="post-wrapper"><i class="iconfont icon-book toc-btn"></i><i class="iconfont icon-menu aside-btn"></i><div class="markdown-body"><h1 class="post-title"><span>06 Symbol-ES6 新基础类型</span></h1><div class="post-info"><span class="post-info-item"><i class="iconfont icon-avatar" title="作者"></i> 前端程序猿</span><span class="post-info-item"><i class="iconfont icon-datetime" title="日期"></i> 2022-07-29</span><span class="post-info-item"><i class="iconfont icon-categorynormal" title="分类"></i><!--[--><a href="/vuepress-theme-knzn/categories/?category=%E5%A4%A7%E5%89%8D%E7%AB%AF" class="post-type">大前端</a><!--]--></span><span class="post-info-item"><i class="iconfont icon-tag" title="标签"></i><!--[--><a href="/vuepress-theme-knzn/tags/?tag=typescript" class="post-type">typescript</a><!--]--></span></div><div><p>symbol 是 ES6 新增的一种基本数据类型，它和 number、string、boolean、undefined 和 null 是同类型的，object 是引用类型。它用来表示独一无二的值，通过 Symbol 函数生成。</p><p>本小节代码都是纯 JavaScript 代码，建议在非 TypeScript 环境练习，你可以在浏览器开发者工具的控制台里练习。但是因为 TypeScript 也支持 Symbol，所以如果需要特别说明的地方，我们会提示在 TypeScript 中需要注意的内容。</p><blockquote><p>你若要喜爱你自己的价值，你就得给世界创造价值。 ——歌德</p></blockquote><p>我们先来看例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">typeof</span> s <span class="token comment">// &#39;symbol&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>我们使用 Symbol 函数生成了一个 symbol 类型的值 s。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>Symbol 前面不能加 new 关键字，直接调用即可创建一个独一无二的 symbol 类型的值。</p></div><p>我们使用 Symbol 函数生成了一个 symbol 类型的值 s。</p><p>注意：Symbol 前面不能加 new 关键字，直接调用即可创建一个独一无二的 symbol 类型的值。</p><p>我们可以在使用 Symbol 方法创建 symbol 类型值的时候传入一个参数，这个参数需要是字符串的。如果传入的参数不是字符串，会先调用传入参数的 toString 方法转为字符串。先来看例子：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token comment">// 补充：这里第三行代码可能会报一个错误：This condition will always return &#39;false&#39; since the types &#39;unique symbol&#39; and &#39;unique symbol&#39; have no overlap.</span>
<span class="token comment">// 这是因为编译器检测到这里的s1 === s2始终是false，所以编译器提醒你这代码写的多余，建议你优化。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面这个例子中使用 Symbol 方法创建了两个 symbol 值，方法中都传入了相同的字符串’lison’，但是 s1 === s2 却是 false，这就是我们说的，Symbol 方法会返回一个独一无二的值，这个值和任何一个值都不等，虽然我们传入的标识字符串都是&quot;lison&quot;，但是确实两个不同的值。</p><p>你可以理解为我们每一个人都是独一无二的，虽然可以有相同的名字，但是名字只是用来方便我们区分的，名字相同但是人还是不同的。Symbol 方法传入的这个字符串，就是方便我们在控制台或程序中用来区分 symbol 值的。我们可以调用 symbol 值的 toString 方法将它转为字符串：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &#39;Symbol(lison)&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以简单地理解 symbol 值为字符串类型的值，但是它和字符串有很大的区别，它不可以和其他类型的值进行运算，但是可以转为字符串和布尔类型值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &#39;Symbol(lison)&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过上面的例子可以看出，symbol 类型值和对象相似，本身转为布尔值为 true，取反为 false。</p><h2 id="_1-作为属性名" tabindex="-1"><a class="header-anchor" href="#_1-作为属性名" aria-hidden="true">#</a> 1. 作为属性名</h2><p>在 ES6 中，对象的属性名支持表达式，所以你可以使用一个变量作为属性名，这对于一些代码的简化很有用处，但是表达式必须放到方括号内：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> prop <span class="token operator">=</span> <span class="token string">&#39;name&#39;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;Lison&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &#39;Lison</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>了解了这个新特性后，我们接着学习。symbol 值可以作为属性名，因为 symbol 值是独一无二的，所以当它作为属性名时，不会和其他任何属性名重复：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;lison&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { Symbol(): &#39;lison&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以看到，打印出来的对象有一个属性名是 symbol 值。如果我们想访问这个属性值，就只能使用 name 这个 symbol 值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// &#39;lison&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>通过上面的例子可以看到，我们访问属性名为 symbol 类型值的 name 时，我们不能使用点’.‘号访问，因为 obj.name 这的 name 实际上是字符串’name’，这和访问普通字符串类型的属性名一样。你必须使用方括号的形式，这样 obj[name]这的 name 才是我们定义的 symbol 类型的变量 name，之后我们再访问 obj 的[name]属性就必须使用变量 name</p><p>等我们后面学到 ES6 的类(Class)的时候，会利用此特性实现私有属性和私有方法。</p><h2 id="_2-属性名的遍历" tabindex="-1"><a class="header-anchor" href="#_2-属性名的遍历" aria-hidden="true">#</a> 2. 属性名的遍历</h2><p>使用 Symbol 类型值作为属性名，这个属性不会被 for…in 遍历到，也不会被 Object.keys()、Object.getOwnPropertyNames()、JSON.stringify()获取到：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;lison&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// =&gt; &#39;age&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&#39;age&#39;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&#39;age&#39;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// &#39;{ &quot;age&quot;: 18 }&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然这么多方法都无法遍历和访问到 Symbol 类型的属性名，但是 Symbol 类型的属性并不是私有属性。我们可以使用 Object.getOwnPropertySymbols 方法获取对象的所有 symbol 类型的属性名：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;lison&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> SymbolPropNames <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>SymbolPropNames<span class="token punctuation">)</span>
<span class="token comment">// [ Symbol(name) ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>SymbolPropNames<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// &#39;lison&#39;</span>
<span class="token comment">// 如果最后一行代码这里报错提示：元素隐式具有 &quot;any&quot; 类型，因为类型“{ [name]: string; age: number; }”没有索引签名。 那可能是在tsconfig.json里开启了noImplicitAny。因为这里我们还没有学习接口等高级类型，所以你可以先忽略这个错误，或者关闭noImplicitAny。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了 Object.getOwnPropertySymbols 这个方法，还可以用 ES6 新提供的 Reflect 对象的静态方法 Reflect.ownKeys，它可以返回所有类型的属性名，所以 Symbol 类型的也会返回。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;lison&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [ &#39;age&#39;, Symbol(name) ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-symbol-for-和-symbol-keyfor" tabindex="-1"><a class="header-anchor" href="#_3-symbol-for-和-symbol-keyfor" aria-hidden="true">#</a> 3. Symbol.for()和 Symbol.keyFor()</h2><p>Symbol 包含两个静态方法，for 和 keyFor。</p><h3 id="_3-1-symbol-for" tabindex="-1"><a class="header-anchor" href="#_3-1-symbol-for" aria-hidden="true">#</a> 3.1 Symbol.for()</h3><p>我们使用 Symbol 方法创建的 symbol 值是独一无二的，每一个值都不和其他任何值相等，我们来看下例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> s3 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> s4 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
s3 <span class="token operator">===</span> s4 <span class="token comment">// true</span>
s1 <span class="token operator">===</span> s3 <span class="token comment">// false</span>
<span class="token comment">// 这里还是会报错误：This condition will always return &#39;false&#39; since the types &#39;unique symbol&#39; and &#39;unique symbol&#39; have no overlap.还是我们说过的，因为这里的表达式始终是true和false，所以编译器会提示我们。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>直接使用 Symbol 方法，即便传入的字符串是一样的，创建的 symbol 值也是互不相等的。**而使用 Symbol.for 方法传入字符串，会先检查有没有使用该字符串调用 Symbol.for 方法创建的 symbol 值，如果有，返回该值，如果没有，则使用该字符串新创建一个。**使用该方法创建 symbol 值后会在全局范围进行注册。</p><p>注意：这个注册的范围包括当前页面和页面中包含的 iframe，以及 service sorker，我们来看个例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;iframe&#39;</span><span class="token punctuation">)</span>
iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>

iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span> <span class="token operator">===</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 注意：如果你在JavaScript环境中这段代码是没有问题的，但是如果在TypeScript开发环境中，可能会报错：类型“Window”上不存在属性“Symbol”。</span>
<span class="token comment">// 因为这里编译器推断出iframe.contentWindow是Window类型，但是TypeScript的声明文件中，对Window的定义缺少Symbol这个字段，所以会报错，所以你可以这样写：</span>
<span class="token comment">// (iframe.contentWindow as Window &amp; { Symbol: SymbolConstructor }).Symbol.for(&quot;lison&quot;) === Symbol.for(&quot;lison&quot;)</span>
<span class="token comment">// 这里用到了类型断言和交叉类型，SymbolConstructor是内置的类型。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面这段代码的意思是创建一个 iframe 节点并把它放到 body 中，我们通过这个 iframe 对象的 contentWindow 拿到这个 iframe 的 window 对象，在 iframe.contentWindow 上添加一个值就相当于你在当前页面定义一个全局变量一样，我们看到，在 iframe 中定义的键为’lison’的 symbol 值在和在当前页面定义的键为’lison’的 symbol 值相等，说明它们是同一个值。</p><h3 id="_3-2-symbol-keyfor" tabindex="-1"><a class="header-anchor" href="#_3-2-symbol-keyfor" aria-hidden="true">#</a> 3.2 Symbol.keyFor()</h3><p>该方法传入一个 symbol 值，返回该值在全局注册的键名：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> sym <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;lison&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &#39;lison&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-11-个内置-symbol-值" tabindex="-1"><a class="header-anchor" href="#_4-11-个内置-symbol-值" aria-hidden="true">#</a> 4. 11 个内置 symbol 值</h2><p>ES6 提供了 11 个内置的 Symbol 值，指向 JS 内部使用的属性和方法。看到它们第一眼你可能会有疑惑，这些不是 Symbol 对象的一个属性值吗？没错，这些内置的 Symbol 值就是保存在 Symbol 上的，你可以把 Symbol.xxx 看做一个 symbol 值。接下来我们来挨个学习一下：</p><h3 id="_4-1-symbol-hasinstance" tabindex="-1"><a class="header-anchor" href="#_4-1-symbol-hasinstance" aria-hidden="true">#</a> 4.1 Symbol.hasInstance</h3><p>对象的 Symbol.hasInstance 指向一个内部方法，当你给一个对象设置以 Symbol.hasInstance 为属性名的方法后，当其他对象使用 instanceof 判断是否为这个对象的实例时，会调用你定义的这个方法，参数是其他的这个对象，来看例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">otherObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>otherObj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span> <span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">obj</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token comment">// 注意：在TypeScript中这会报错，&quot;instanceof&quot; 表达式的右侧必须属于类型 &quot;any&quot;，或属于可分配给 &quot;Function&quot; 接口类型的类型。</span>
<span class="token comment">// 是要求你instanceof操作符右侧的值只能是构造函数或者类，或者类型是any类型。这里你可以使用类型断言，将obj改为obj as any</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到当我们使用 instanceof 判断{ a: ‘a’ }是否是 obj 创建的实例的时候，Symbol.hasInstance 这个方法被调用了。</p><h3 id="_4-2-symbol-isconcatspreadable" tabindex="-1"><a class="header-anchor" href="#_4-2-symbol-isconcatspreadable" aria-hidden="true">#</a> 4.2 Symbol.isConcatSpreadable</h3><p>这个值是一个可读写布尔值，当一个数组的 Symbol.isConcatSpreadable 设为 false 时，这个数组在数组的 concat 方法中不会被扁平化。我们来看下例子</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 打印结果为[1, 2, 3, 4]，length为4</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
arr1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 打印结果如下：</span>
<span class="token comment">/*
 [ [&quot;a&quot;, &quot;b&quot;, Symbol(Symbol.isConcatSpreadable): false], 3, 4 ]
 最外层这个数组有三个元素，第一个是一个数组，因为我们设置了arr1[Symbol.isConcatSpreadable] = false
 所以第一个这个数组没有被扁平化，第一个元素这个数组看似是有三个元素，但你在控制台可以看到这个数组的length为2
 Symbol(Symbol.isConcatSpreadable): false不是他的元素，而是他的属性，我们知道数组也是对象，所以我们可以给数组设置属性
 你可以试试如下代码，然后看下打印出来的效果：
  let arr = [1, 2]
  arr.props = &#39;value&#39;
  console.log(arr)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-symbol-species" tabindex="-1"><a class="header-anchor" href="#_4-3-symbol-species" aria-hidden="true">#</a> 4.3 Symbol.species</h3><p>这里我们需要提前使用类的知识来讲解这个 symbol 值的用法，类的详细内容我们会在后面课程里全面讲解。这个知识你需要在纯 JavaScript 的开发环境中才能看出效果，你可以在浏览器开发者工具的控制台尝试。在 TypeScript 中，下面两个例子都是一样的会报 a.getName is not a function 错误。</p><p>首先我们使用 class 定义一个类 C，使用 extends 继承原生构造函数 Array，那么类 C 创建的实例就能继承所有 Array 原型对象上的方法，比如 map、filter 等。我们先来看代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;lison&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// [2, 3, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">C</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;lison&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个例子中，a 是由 c 通过 map 方法衍生出来的，我们也看到了，a 既是 C 的实例，也是 Array 的实例。但是如果我们想只让衍生的数组是 Array 的实例，就需要用 Symbol.species，我们来看下怎么使用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array
  <span class="token punctuation">}</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;lison&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// [2, 3, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">C</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// error a.getName is not a function</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>就是给类 C 定义一个静态 get 存取器方法，方法名为 Symbol.species，然后在这个方法中返回要构造衍生数组的构造函数。所以最后我们看到，a instanceof C 为 false，也就是 a 不再是 C 的实例，也无法调用继承自 C 的方法。</p><h3 id="_4-4-symbol-match、symbol-replace、symbol-search-和-symbol-split" tabindex="-1"><a class="header-anchor" href="#_4-4-symbol-match、symbol-replace、symbol-search-和-symbol-split" aria-hidden="true">#</a> 4.4 Symbol.match、Symbol.replace、Symbol.search 和 Symbol.split</h3><p>这个 Symbol.match 值指向一个内部方法，当在字符串 str 上调用 match 方法时，会调用这个方法，来看下例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>match<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> string<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;abcde&#39;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>相同的还有 Symbol.replace、Symbol.search 和 Symbol.split，使用方法和 Symbol.match 是一样的。</p><h3 id="_4-5-symbol-iterator" tabindex="-1"><a class="header-anchor" href="#_4-5-symbol-iterator" aria-hidden="true">#</a> 4.5 Symbol.iterator</h3><p>数组的 Symbol.iterator 属性指向该数组的默认遍历器方法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> iterator <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-symbol-toprimitive" tabindex="-1"><a class="header-anchor" href="#_4-6-symbol-toprimitive" aria-hidden="true">#</a> 4.6 Symbol.toPrimitive</h3><p>对象的这个属性指向一个方法，当这个对象被转为原始类型值时会调用这个方法，这个方法有一个参数，是这个对象被转为的类型，我们来看下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// const b = obj++ // number</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">abc</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token comment">// string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-symbol-tostringtag" tabindex="-1"><a class="header-anchor" href="#_4-7-symbol-tostringtag" aria-hidden="true">#</a> 4.7 Symbol.toStringTag</h3><p>Symbol.toStringTag 和 Symbol.toPrimitive 相似，对象的这个属性的值可以是一个字符串，也可以是一个存取器 get 方法，当在对象上调用 toString 方法时调用这个方法，返回值将作为&quot;[object xxx]&quot;中 xxx 这个值：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;lison&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object lison]&quot;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;haha&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
obj2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object haha]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-symbol-unscopables" tabindex="-1"><a class="header-anchor" href="#_4-8-symbol-unscopables" aria-hidden="true">#</a> 4.8 Symbol.unscopables</h3><p>这个值和 with 命令有关，我们先来看下 with 怎么使用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">with</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// &quot;a&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// &quot;b&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果是在TypeScript开发环境中，这段代码可能with会报错：不支持 &quot;with&quot; 语句，这是因为在严格模式下，是不允许使用with的。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，使用 with 传入一个对象后，在代码块中访问对象的属性就不需要写对象了，直接就可以用它的属性。对象的 Symbol.unscopables 属性指向一个对象，该对象包含了当使用 with 关键字时，哪些属性被 with 环境过滤掉:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">/*
{
    copyWithin: true
    entries: true
    fill: true
    find: true
    findIndex: true
    includes: true
    keys: true
    values: true
}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-在-typescript-中使用-symbol-类型" tabindex="-1"><a class="header-anchor" href="#_5-在-typescript-中使用-symbol-类型" aria-hidden="true">#</a> 5. 在 TypeScript 中使用 symbol 类型</h2><h3 id="_5-1-基础" tabindex="-1"><a class="header-anchor" href="#_5-1-基础" aria-hidden="true">#</a> 5.1 基础</h3><p>学习完 ES6 标准中 Symbol 的所有内容后，我们来看下在 TypeScript 中使用 symbol 类型值，很简单。就是指定一个值的类型为 symbol 类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> sym<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5-2-unique-symbol" tabindex="-1"><a class="header-anchor" href="#_5-2-unique-symbol" aria-hidden="true">#</a> 5.2 unique symbol</h3><p>TypeScript 在 2.7 版本对 Symbol 做了补充，增加了 unique symbol 这种类型，他是 symbol 的子类型，这种类型的值只能由 Symbol()或 Symbol.for()创建，或者通过指定类型来指定一个值是这种类型。这种类型的值仅可用于常量的定义和用于属性名。</p><p>另外还有一点要注意，定义 unique symbol 类型的值，必须用 const 不能用 let。我们来看个在 TypeScript 中使用 Symbol 值作为属性名的例子：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> key1<span class="token operator">:</span> unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> key2<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;value1&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;value2&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key2<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// error 类型“symbol”不能作为索引类型使用。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结" aria-hidden="true">#</a> 小结</h2><p>本小节我们详细学习了 Symbol 的全部知识，本小节的内容较多：我们学习了 Symbol 值的基本使用，使用 Symbol 函数创建一个 symbol 类型值，可以给它传一个字符串参数，来对 symbol 值做一个区分，但是即使多次 Symbol 函数调用传入的是相同的字符串，创建的 symbol 值也是彼此不同的。</p><p>我们还学习了 Symbol 的两个静态方法：Symbol.for 和 Symbol.keyFor，Symbol.for 调用时传入一个字符串，使用此方式创建 symbol 值时会先在全局范围搜索是否有用此字符串注册的 symbol 值。如果没有创建一个新的；如果有返回这个 symbol 值，Symbol.keyFor 则是传入一个 symbol 值然后返回该值在全局注册时的标志字符串。我们还学习了 11 个内置的 symbol 值，在设计一些高级逻辑时，可能会用到，大部分业务开发很少用到，你可以了解这些值的用途，日后如果遇到这个需求可以想到这有这些内容。</p><p>下个小节我们将对第二个前面大致介绍的知识点——枚举 Enum 进行详细学习，学完后你将全面了解枚举。</p></div></div><div class="theme-divider"></div><div class="giscus-comment"><!----></div></div><div class="card-box card-wrapper post-tocs"><header><h3 class="title"><i class="iconfont icon-categorynormal"></i><span> 目录 </span></h3></header><nav class="vuepress-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_1-作为属性名" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="1. 作为属性名">1. 作为属性名</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_2-属性名的遍历" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="2. 属性名的遍历">2. 属性名的遍历</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_3-symbol-for-和-symbol-keyfor" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="3. Symbol.for()和 Symbol.keyFor()">3. Symbol.for()和 Symbol.keyFor()</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_3-1-symbol-for" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="3.1 Symbol.for()">3.1 Symbol.for()</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_3-2-symbol-keyfor" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="3.2 Symbol.keyFor()">3.2 Symbol.keyFor()</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-11-个内置-symbol-值" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4. 11 个内置 symbol 值">4. 11 个内置 symbol 值</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-1-symbol-hasinstance" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.1 Symbol.hasInstance">4.1 Symbol.hasInstance</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-2-symbol-isconcatspreadable" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.2 Symbol.isConcatSpreadable">4.2 Symbol.isConcatSpreadable</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-3-symbol-species" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.3 Symbol.species">4.3 Symbol.species</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-4-symbol-match、symbol-replace、symbol-search-和-symbol-split" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.4 Symbol.match、Symbol.replace、Symbol.search 和 Symbol.split">4.4 Symbol.match、Symbol.replace、Symbol.search 和 Symbol.split</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-5-symbol-iterator" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.5 Symbol.iterator">4.5 Symbol.iterator</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-6-symbol-toprimitive" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.6 Symbol.toPrimitive">4.6 Symbol.toPrimitive</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-7-symbol-tostringtag" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.7 Symbol.toStringTag">4.7 Symbol.toStringTag</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_4-8-symbol-unscopables" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="4.8 Symbol.unscopables">4.8 Symbol.unscopables</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_5-在-typescript-中使用-symbol-类型" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="5. 在 TypeScript 中使用 symbol 类型">5. 在 TypeScript 中使用 symbol 类型</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_5-1-基础" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="5.1 基础">5.1 基础</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#_5-2-unique-symbol" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="5.2 unique symbol">5.2 unique symbol</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/vuepress-theme-knzn/c9b78ed41f61af05e34287532b9f35ab/#小结" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="小结">小结</a><!--[--><!--]--></li></ul></nav></div></div></main><footer class="theme-footer theme-common-footer"><div class="copyright"><a class="beian" href="">粤ICP备20016112号-2</a><span class="delimiter">|</span><span class="info">Copyright © 2018-2022 knzn.net</span></div></footer><div style="display:none;" class="back-to-top"><i class="iconfont icon-back-to-top"></i></div><!--]--><!--]--><!--]--></div>
    <script src="/vuepress-theme-knzn/assets/js/runtime~app.813766ea.js" defer></script><script src="/vuepress-theme-knzn/assets/js/4666.93202135.js" defer></script><script src="/vuepress-theme-knzn/assets/js/app.4f9d344d.js" defer></script>
  </body>
</html>
