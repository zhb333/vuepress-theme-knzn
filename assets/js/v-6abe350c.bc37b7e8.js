"use strict";(self.webpackChunkvuepress_theme_knzn=self.webpackChunkvuepress_theme_knzn||[]).push([[3497],{8037:(n,s,e)=>{e.r(s),e.d(s,{data:()=>a});const a=JSON.parse('{"key":"v-6abe350c","path":"/c440f08606b58fca67b46f1652721c20/","title":"使用 docker 搭建 MongoDB 服务","lang":"zh-CN","frontmatter":{"permalink":"/c440f08606b58fca67b46f1652721c20/","title":"使用 docker 搭建 MongoDB 服务","date":"2019-09-08T21:33:39.000Z","categories":["backEnd"],"tags":["mongoDB"]},"excerpt":"","headers":[{"level":2,"title":"一、 拉取 MongoDB 官方 docker 镜像","slug":"一、-拉取-mongodb-官方-docker-镜像","children":[]},{"level":2,"title":"二、启动 MongoDB 服务器容器","slug":"二、启动-mongodb-服务器容器","children":[]},{"level":2,"title":"三、mongo-express 网页版的 MongoDB 数据库管理系统","slug":"三、mongo-express-网页版的-mongodb-数据库管理系统","children":[]},{"level":2,"title":"四、运行 Mongo Shell","slug":"四、运行-mongo-shell","children":[]},{"level":2,"title":"五、第一条 MongoDB 命令","slug":"五、第一条-mongodb-命令","children":[]}],"git":{"updatedTime":1659094015000,"contributors":[{"name":"张焕标","email":"1140457303@qq.com","commits":1}]},"filePathRelative":"杂谈/mongoDB笔记/01-docker-install-mongodb.md"}')},9652:(n,s,e)=>{e.r(s),e.d(s,{default:()=>l});var a=e(6252);const o=[(0,a.uE)('<h2 id="一、-拉取-mongodb-官方-docker-镜像" tabindex="-1"><a class="header-anchor" href="#一、-拉取-mongodb-官方-docker-镜像" aria-hidden="true">#</a> 一、 拉取 <code>MongoDB</code> 官方 <code>docker</code> 镜像</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mongo:4\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看下载的镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> image <span class="token function">ls</span>\n<span class="token comment"># or</span>\n<span class="token function">docker</span> images\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nmongo               <span class="token number">4</span>                   409c3f937574        <span class="token number">13</span> days ago         493MB\nmongo-express       latest              323f84fbaf9b        <span class="token number">5</span> weeks ago         130MB\nregistry            <span class="token number">2</span>                   2d4f4b5309b1        <span class="token number">2</span> months ago        <span class="token number">26</span>.2MB\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、启动-mongodb-服务器容器" tabindex="-1"><a class="header-anchor" href="#二、启动-mongodb-服务器容器" aria-hidden="true">#</a> 二、启动 <code>MongoDB</code> 服务器容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --name mongo4 -v /mongodb/data:/data/db -d mongo:4\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>--name</code> 指定 <code>docker</code> 容器的名字为 <code>mongo4</code></li><li><code>-v</code> 将本地 <code>/mongodb/data</code> 挂载到容器环境的 <code>/data/db</code>(即<code>MongoDB保存数据的位置</code>)</li><li><code>-d</code> 后台运行 <code>docker</code> 进程</li></ul><p>查看 <code>docker</code> 容器状态</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span>\n<span class="token comment"># or</span>\n<span class="token function">docker</span> container <span class="token function">ls</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\nebd63a30b9ce        mongo:4             <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">9</span> seconds ago       Up <span class="token number">7</span> seconds        <span class="token number">27017</span>/tcp                mongo4\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、mongo-express-网页版的-mongodb-数据库管理系统" tabindex="-1"><a class="header-anchor" href="#三、mongo-express-网页版的-mongodb-数据库管理系统" aria-hidden="true">#</a> 三、<code>mongo-express</code> 网页版的 <code>MongoDB</code> 数据库管理系统</h2><p>拉取 <code>mongo-express</code> 镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mongo-express\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行 <code>mongo-express</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run --link mongo4:mongo -p <span class="token number">8081</span>:8081 mongo-express\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>--link</code> 连接到 <code>mongo4</code>容器的 <code>mongo</code> 程序</li><li><code>-p</code> 指定访问 <code>mongo-express</code> 的 <code>HTTP</code> 端口</li></ul><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --link mongo4:mongo -p 8081:8081 mongo-express</span>\nWaiting <span class="token keyword">for</span> mongo:27017<span class="token punctuation">..</span>.\nWelcome to mongo-express\n------------------------\n\n\nMongo Express server listening at http://0.0.0.0:8081\nServer is <span class="token function">open</span> to allow connections from anyone <span class="token punctuation">(</span><span class="token number">0.0</span>.0.0<span class="token punctuation">)</span>\nbasicAuth credentials are <span class="token string">&quot;admin:pass&quot;</span>, it is recommended you change this <span class="token keyword">in</span> your config.js<span class="token operator">!</span>\nDatabase connected\nAdmin Database connected\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器访问 <code>8081</code> 端口，可进入数据库的管理界面</p><h2 id="四、运行-mongo-shell" tabindex="-1"><a class="header-anchor" href="#四、运行-mongo-shell" aria-hidden="true">#</a> 四、运行 <code>Mongo Shell</code></h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -i -t mongo4 mongo\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it mongo4 mongo</span>\nMongoDB shell version v4.4.0\nconnecting to: mongodb://127.0.0.1:27017/?compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span><span class="token assign-left variable">gssapiServiceName</span><span class="token operator">=</span>mongodb\nImplicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;367a12f1-2201-4b20-be59-99163728ce84&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>\nMongoDB server version: <span class="token number">4.4</span>.0\nWelcome to the MongoDB shell.\nFor interactive help, <span class="token builtin class-name">type</span> <span class="token string">&quot;help&quot;</span><span class="token builtin class-name">.</span>\nFor <span class="token function">more</span> comprehensive documentation, see\n\thttps://docs.mongodb.com/\nQuestions? Try the MongoDB Developer Community Forums\n\thttps://community.mongodb.com\n---\nThe server generated these startup warnings when booting:\n        <span class="token number">2020</span>-09-02T15:53:58.794+00:00: Access control is not enabled <span class="token keyword">for</span> the database. Read and <span class="token function">write</span> access to data and configuration is unrestricted\n        <span class="token number">2020</span>-09-02T15:53:58.797+00:00: /sys/kernel/mm/transparent_hugepage/enabled is <span class="token string">&#39;always&#39;</span><span class="token builtin class-name">.</span> We suggest setting it to <span class="token string">&#39;never&#39;</span>\n        <span class="token number">2020</span>-09-02T15:53:58.797+00:00: /sys/kernel/mm/transparent_hugepage/defrag is <span class="token string">&#39;always&#39;</span><span class="token builtin class-name">.</span> We suggest setting it to <span class="token string">&#39;never&#39;</span>\n---\n---\n        Enable MongoDB&#39;s <span class="token function">free</span> cloud-based monitoring service, <span class="token function">which</span> will <span class="token keyword">then</span> receive and display\n        metrics about your deployment <span class="token punctuation">(</span>disk utilization, CPU, operation statistics, etc<span class="token punctuation">)</span>.\n\n        The monitoring data will be available on a MongoDB website with a unique URL accessible to you\n        and anyone you share the URL with. MongoDB may use this information to <span class="token function">make</span> product\n        improvements and to suggest MongoDB products and deployment options to you.\n\n        To <span class="token builtin class-name">enable</span> <span class="token function">free</span> monitoring, run the following command: db.enableFreeMonitoring<span class="token punctuation">(</span><span class="token punctuation">)</span>\n        To permanently disable this reminder, run the following command: db.disableFreeMonitoring<span class="token punctuation">(</span><span class="token punctuation">)</span>\n---\n<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的运行结果，表示成功执行 <code>mongo4</code> 容器的 <code>mongo</code> 程序，并且可以，交互式的在 <code>mongo shell</code> 中执行命令</p><h2 id="五、第一条-mongodb-命令" tabindex="-1"><a class="header-anchor" href="#五、第一条-mongodb-命令" aria-hidden="true">#</a> 五、第一条 <code>MongoDB</code> 命令</h2><p>查看所有数据库</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>show databases\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show databases\nadmin   <span class="token number">0</span>.000GB\nconfig  <span class="token number">0</span>.000GB\n<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB\n<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',32)],i={},l=(0,e(3744).Z)(i,[["render",function(n,s){return(0,a.wg)(),(0,a.iD)("div",null,o)}]])}}]);